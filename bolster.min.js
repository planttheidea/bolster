/*
 *
 * Copyright 2014 Tony Quetano under the terms of the MIT
 * license found at https://github.com/planttheidea/bolster/MIT_License.txt
 *
 * Bolster.js - An augmentation library for jQuery
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
*/
(function(g,d,k){var m=function(a){throw Error(a);},v=function(){var a={audio:d.createElement("audio"),canvas:d.createElement("canvas"),document:d.documentElement||d.body,div:d.createElement("div"),input:d.createElement("input"),p:d.createElement("p"),style:d.createElement("style"),video:d.createElement("video")},b=function(c){try{for(var b=!1,e=c.length;e--;)if(c[e]in a.document.style){b=!0;break}return b}catch(d){return!1}},e=function(c,b){try{var e=a.div.style[c];a.div.style[c]=b;return e!==a.div.style[c]?
(a.div.style[c]="",!0):!1}catch(d){return!1}},h=function(c){return c in a.input},f=function(c){try{var b=a.input.type;a.input.type=c;return b!==a.input.type?(a.input.type="text",!0):!1}catch(e){return!1}},c=function(c){try{var b=d.head||d.getElementsByTagName("head")[0],e=a.style.sheet||a.style.styleSheet;a.style.type="text/css";b.appendChild(a.style);return e&&c?(E?function(a){e.cssText=a+" { }";return 0!==e.cssText.length&&!/unknown/i.test(e.cssText)&&0===e.cssText.indexOf(a)}:function(a){try{e.insertRule(a+
"{ }",0),e.deleteRule(e.cssRules.length-1)}catch(c){return!1}return!0})(c):!1}catch(f){return!1}};c("test");var F=!!g.applicationCache,p=a.div.attachEvent,w=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mpeg;").replace(/no/,"")),l=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mp4;").replace(/no/,"")),m=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/ogg;").replace(/no/,"")),n=b("boxShadow MozBoxShadow WebkitBoxShadow MsBoxShadow KhtmlBoxShadow OBoxShadow".split(" ")),s=!(!a.canvas.getContext||
!a.canvas.getContext("2d")),t=!!d.documentElement.classList,x;x=a.div.style.animationName?!0:b(["WebkitAnimationName","MozAnimationName","OAnimationName","msAnimationName","KhtmlAnimationName"]);var v=e("width","calc(100% - 10px)"),G=b(["columnCount","webkitColumnCount","MozColumnCount"]),H=b(["boxReflect","WebkitBoxRefect"]),E=!!a.style.styleSheet,I=!!g.CustomEvent,J=!!("draggable"in a.div),K=a.div.addEventListener,L=e("display","flex"),M=!!("geolocation"in navigator),N=!!d.getElementsByClassName,
O=function(c,b){try{return b=b||a.div,support=!1,c="on"+c,support=c in b,support||(b.setAttribute(c,"return;"),support="function"===k.type(b[c]),b.removeAttribute(c)),support}catch(e){return!1}}("hashchange",g),P=!(!g.history||!g.history.pushState),Q=e("background-color","hsla(0,0%,0%,0)"),R=function(){try{var a=["webkit","ms","moz"],c=!1;if(g.indexedDB&&g.IDBTransaction&&g.IDBKeyRange)c=!0;else for(var b=a.length;b--;)if(g[a[b]+"IndexedDB"]&&g[a[b]+"IDBTransaction"]&&g[a[b]+"IDBKeyRange"]){c=!0;
break}return c}catch(e){return!1}}(),S=h("autocomplete"),T=h("autofocus"),U=f("color"),V=f("date"),W=f("datetime"),X=f("datetime-local"),Y=f("email"),Z=h("list"),$=h("max"),aa=h("min"),ba=h("multiple"),ca=f("month"),da=f("number"),ea=h("pattern"),fa=h("placeholder"),ga=f("range"),ha=h("required"),ia=f("search"),ja=h("step"),ka=f("tel"),la=f("time"),ma=f("url"),na=f("week"),q;try{g.localStorage.setItem("test","test"),g.localStorage.removeItem("test"),q=!0}catch(Ka){q=!1}var y=function(){try{for(var a=
["linear-gradient","-webkit-linear-gradient","-moz-linear-gradient","-o-linear-gradient"],c=!1,b=a.length;b--;)if(e("background",a[b]+"(-45deg,rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%)")){c=!0;break}return c?c:e("background","-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,1)))")}catch(d){return!1}}(),oa=function(){try{var c=d.createElement("style"),b=!1;a.div.id="MediaTest";d.body.appendChild(a.div);c.textContent="@media screen and (min-width:1px) { #MediaTest { position:absolute; }}";
d.body.appendChild(c);g.getComputedStyle&&"absolute"==g.getComputedStyle(a.div).position&&(b=!0);a.div.style="";d.body.removeChild(a.div);d.body.removeChild(c);return b}catch(e){return!1}}(),pa="undefined"!==k.type(g.pageXOffset)&&"undefined"!==k.type(g.pageYOffset),qa=!!g.postMessage,ra=c(":active"),sa=c(":after"),ta=c("::after"),ua=c(":before"),va=c("::before"),wa=c(":focus"),xa=c(":hover"),ya=c("::first-letter"),za=c("::first-line"),Aa=c(":link"),Ba=c(":visited"),z=function(){try{for(var a=["radial-gradient",
"-webkit-radial-gradient","-moz-radial-gradient","-o-radial-gradient"],c=!1,b=a.length;b--;)if(e("background",a[b]+"(rgb(0,0,0) 0%,rgb(255,255,255) 100%)")){c=!0;break}return c?c:e("background","-webkit-gradient(radial, center center, 0px, center center, 100%, from(rgb(0,0,0)), to(rgb(255,255,255)))")}catch(d){return!1}}(),Ca=e("background-color","rgba(0,0,0,0)"),r;try{g.sessionStorage.setItem("test","test"),g.sessionStorage.removeItem("test"),r=!0}catch(La){r=!1}var Da=!!(-1<d.createElementNS("http://www.w3.org/2000/svg",
"animateMotion").toString().indexOf("SVG")),Ea=!(!d.createElementNS||!d.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Fa=b(["textShadow"]),Ga=!!("ontouchstart"in d.documentElement||g.navigator.msMaxTouchPoints),u=b(["transform","WebkitTransform","MozTransform","msTransform","OTransform"]),A=function(){if(u)try{for(var a=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],c=!1,b=a.length;b--;)if(e(a[b],"translate3d(1px,1px,1px)")){c=!0;break}return c}catch(d){return!1}else return!1}(),
Ha=b(["transition","WebkitTransition","MozTransition","OTransition"]),B=!(!a.video.canPlayType||!a.video.canPlayType("video/mp4;").replace(/no/,"")),C=!(!a.video.canPlayType||!a.video.canPlayType("video/ogg;").replace(/no/,"")),D=!(!a.video.canPlayType||!a.video.canPlayType("video/webm;").replace(/no/,"")),Ia=function(){try{var c=!1;try{a.canvas.getContext("webgl"),c=!0}catch(b){try{a.getContext("experimental-webgl"),c=!0}catch(e){c=!1}}return c}catch(d){return!1}}(),Ja=!(!g.WebSocket||!g.WebSocket.prototype.send);
(function(){var c=d.head||d.getElementsByTagName("head")[0];c.contains(a.style)&&c.removeChild(a.style)})();return{applicationCache:function(){return F},attachEvent:function(){return p},audio:function(){return{mp3:w,mp4:l,ogg:m}},audioMP3:function(){return w},audioMP4:function(){return l},audioOGG:function(){return m},boxShadow:function(){return n},canvas:function(){return s},classList:function(){return t},cssAnimation:function(){return x},cssCalc:function(){return v},cssColumn:function(){return G},
cssReflection:function(){return H},customEvent:function(){return I},dragAndDrop:function(){return J},eventListener:function(){return K},flexbox:function(){return L},geolocation:function(){return M},getElementsByClassName:function(){return N},gradient:function(){return{linear:y,radial:z}},hashchange:function(){return O},history:function(){return P},hsla:function(){return Q},html5Attribute:function(){return{autocomplete:S,autofocus:T,list:Z,max:$,min:aa,multiple:ba,pattern:ea,placeholder:fa,required:ha,
step:ja}},html5Input:function(){return{color:U,date:V,dateTime:W,dateTimeLocal:X,email:Y,month:ca,number:da,range:ga,search:ia,tel:ka,time:la,url:ma,week:na}},indexedDB:function(){return R},linearGradient:function(){return y},localStorage:function(){return q},mediaQueries:function(){return oa},pageOffset:function(){return pa},postMessage:function(){return qa},pseudoClass:function(){return{active:ra,after:sa,before:ua,focus:wa,hover:xa,link:Aa,visited:Ba}},pseudoElement:function(){return{after:ta,
before:va,firstLetter:ya,firstLine:za}},radialGradient:function(){return z},rgba:function(){return Ca},sessionStorage:function(){return r},smil:function(){return Da},storage:function(){return{local:q,session:r}},svg:function(){return Ea},textShadow:function(){return Fa},touchEvents:function(){return Ga},transform:function(){return{twoD:u,threeD:A}},transform2d:function(){return u},transform3d:function(){return A},transition:function(){return Ha},video:function(){return{mp4:B,ogg:C,webM:D}},videoMP4:function(){return B},
videoOGG:function(){return C},videoWebM:function(){return D},webGL:function(){return Ia},webSocket:function(){return Ja}}}(),l=function(){function a(a){if(0<d[a])for(var b in e)if(e[b])for(var f=e[b].length;f--;)e[b][f].token===d[a]&&(delete d[a],e[b].splice(f,1))}function b(c,b,d,f,g){"array"!==k.type(e[c])&&(e[c]=[]);f&&(d=function(){d.call();a(g)});e[c].push({token:b,func:d})}var e={},d={},f=-1;return{getID:function(a){return d[a.name]},publish:function(a){var b=a.data||{},d,f;if(!e[a.topic])return!1;
for(f=(d=e[a.topic])?d.length:0;f--;)d[f].func(b,a.topic);return this},subscribe:function(c){if("string"!==k.type(c.name))return m("Name passed is not a string."),!1;d[c.name]&&a(c.name);switch(k.type(c.topic)){case "string":b(c.topic,c.token,c.fn,c.once,c.name);break;case "array":for(var e=c.topic.length;e--;)b(c.topic[e],c.token,c.fn,c.once,c.name);break;case "undefined":m("Must provide a topic to subscribe to.");break;default:m("Invalid topic type, must be either string or array.")}d[c.name]=++f;
return this},unsubscribe:function(c){switch(k.type(c.name)){case "string":a(c.name);break;case "array":for(var b=c.name.length;b--;)a(c.name[b]);break;default:m("Name passed is not of valid type.")}return this}}}(),s=function(){var a=k(g),b=a.height(),e=a.width(),h=a.scrollTop(),f=d.createElement("video"),c=function(){return f.requestFullScreen?{active:function(){return null!==d.fullscreenElement},element:function(){return d.fullscreenElement},enter:function(a){a.requestFullscreen()},exit:function(){d.exitFullscreen()}}:
f.webkitRequestFullscreen?{active:function(){return null!==d.webkitFullscreenElement},element:function(){return d.webkitFullscreenElement},enter:function(a){a.webkitRequestFullscreen()},exit:function(){d.webkitExitFullscreen()}}:f.mozRequestFullScreen?{active:function(){return null!==d.mozFullScreenElement},element:function(){return d.mozFullScreenElement},enter:function(a){a.mozRequestFullScreen()},exit:function(){d.mozCancelFullScreen()}}:f.msRequestFullscreen?{active:function(){return null!==d.msFullscreenElement},
element:function(){return d.msFullscreenElement},enter:function(a){a.msRequestFullscreen()},exit:function(){d.msExitFullscreen()}}:{active:function(){return!1},element:function(){},enter:function(){m("Fullscreen API is not supported.")},exit:function(){m("Fullscreen API is not supported.")}}}(),n=c.element(),p=c.active();a.off(".bolster.setWindowAttributes").on({"webkitfullscreenchange.bolster.setWindowAttributes mozfullscreenchange.bolster.setWindowAttributes fullscreenchange.bolster.setWindowAttributes MSFullscreenChange.bolster.setWindowAttributes":function(){n=
c.element();p=c.active();l.publish({topic:"fullscreenChange",data:{active:p,element:n}})},"load.bolster.setWindowAttributes":function(a){l.publish({topic:"windowLoad",data:{event:a,height:b,originalState:a.originalEvent.state,scrollTop:h,width:e}})},"resize.bolster.setWindowAttributes":function(){b=a.height();e=a.width();l.publish({topic:"windowResize",data:{height:b,width:e}})},"popstate.bolster.setWindowAttributes":function(a){l.publish({topic:"popstateChange",data:{event:a,originalState:a.originalEvent.state}})},
"scroll.bolster.setWindowAttributes":function(){h=a.scrollTop();l.publish({topic:"windowScroll",data:{scrollTop:h}})}});return{dimensions:function(){return{width:e,height:b}},enterFullscreen:function(a){return c.enter(a)},exitFullscreen:function(){return c.exit()},getFullscreenElement:function(){return n},height:function(){return b},isFullscreen:function(){return p},scrollTop:function(){return h},width:function(){return e},window:function(){return a}}}(),t=function(){var a=k(d),b=a.width(),e=a.height();
a.off(".bolster.setDocumentAttributes").on({"load.bolster.setDocumentAttributes":function(){l.publish({topic:"documentLoad",data:{width:b,height:e}})},"resize.bolster.setDocumentAttributes":function(){b=a.width();e=a.height();l.publish({topic:"documentResize",data:{width:b,height:e}})}});return{document:function(){return a},height:function(){return e},width:function(){return b}}}(),n={loadImg:function(a,b,e,d){if("function"===k.type(d)){var f=new Image;f.src=a.src;f.complete||4===f.readyState||"complete"===
f.readyState?d.call(a,{height:a.height,naturalHeight:f.naturalHeight||f.height,naturalWidth:f.naturalWidth||f.width,percentComplete:Math.floor(100*(b+1)/e),src:a.src,width:a.width}):(f.onload=function(){d.call(a,{height:a.height,naturalHeight:f.naturalHeight||f.height,naturalWidth:f.naturalWidth||f.width,percentComplete:Math.floor(100*(b+1)/e),src:a.src,width:a.width})},f.src=a.src)}},naturalDimensions:{height:function(a){var b=new Image;b.onload=function(){return b.naturalHeight||b.height};b.src=
a.src},width:function(a){var b=new Image;b.onload=function(){return b.naturalWidth||b.width};b.src=a.src}},getPage:function(){return Array.prototype.lastIndexOf?function(a){return a.substring(a.lastIndexOf("/")+1)}:function(a){a=a.split("/");return a[a.length-1].split("?")[0]}}()};k.extend({document:function(a){return a?t[a]():t.document()},page:function(a){return n.getPage(a||g.location.href)},pledge:function(a){if("function"===k.type(a))return(new Pledge).start(a);m("Must pass function into $.pledge.")},
postpone:function(){return new Postpone},publish:function(a){return l.publish(a)},subscribe:function(a){return l.subscribe(a)},supports:function(a){return v[a]()},unsubscribe:function(a){return l.unsubscribe(a)},window:function(a,b){return a?s[a](b):s.window()}});k.fn.extend({active:function(a){return this.hasClass(a||"active")},activate:function(a,b){a=a||"active";return b?this.deactivate(a,b).addClass(a):this.deactivate(a).addClass(a)},deactivate:function(a,b){a=a||"active";b?this.parents("."+b).find("."+
a).removeClass(a):this.parent().find("."+a).removeClass(a);return this},imgLoad:function(a,b){var d=this.length;return b&&0<b?this.each(function(h){var f=this;g.setTimeout(function(){n.loadImg(f,h,d,a)},b*h)}):this.each(function(b){n.loadImg(this,b,d,a)})},naturalHeight:function(){return n.naturalDimensions.height(this.get(0))},naturalWidth:function(){return n.naturalDimensions.width(this.get(0))},unselectable:function(a){(a?this:this.add(this.find("*"))).attr({unselectable:"on"}).css({"-webkit-touch-callout":"none",
"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});return this},unstyle:function(a){switch(k.type(a)){case "string":return this.css(a,"");case "array":for(var b={},d=a.length;d--;)b[a[d]]="";return this.css(b);case "undefined":return this.removeAttr("style");default:return m("Parameter passed in is not of appropriate type; processing aborted."),this}}})})(window,document,jQuery);
