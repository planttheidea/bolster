/*
 *
 * Copyright 2014 Tony Quetano under the terms of the MIT
 * license found at https://github.com/planttheidea/bolster/MIT_License.txt
 *
 * Bolster.js - An augmentation library for jQuery
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
*/
(function(f,d,h){var m=function(a){throw Error(a);},v=function(){var a={audio:d.createElement("audio"),canvas:d.createElement("canvas"),div:d.createElement("div"),input:d.createElement("input"),p:d.createElement("p"),style:d.createElement("style"),video:d.createElement("video")},b=function(c){try{for(var e=!1,b=c.length;b--;)if("undefined"!==a.div.style[c[b]]){e=!0;break}return e}catch(g){return!1}},e=function(c,e){try{var b=a.div.style[c];a.div.style[c]=e;return b!==a.div.style[c]?(a.div.style[c]=
"",!0):!1}catch(g){return!1}},g=function(c){return c in a.input},c=function(c){try{var e=a.input.type;a.input.type=c;return e!==a.input.type?(a.input.type="text",!0):!1}catch(b){return!1}},k=function(c){try{var e=d.head||d.getElementsByTagName("head")[0],b=a.style.sheet||a.style.styleSheet;a.style.type="text/css";e.appendChild(a.style);return b&&c?(E?function(a){b.cssText=a+" { }";return 0!==b.cssText.length&&!/unknown/i.test(b.cssText)&&0===b.cssText.indexOf(a)}:function(a){try{b.insertRule(a+"{ }",
0),b.deleteRule(b.cssRules.length-1)}catch(c){return!1}return!0})(c):!1}catch(g){return!1}};k("test");var n=!!f.applicationCache,p=a.div.attachEvent,w=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mpeg;").replace(/no/,"")),l=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mp4;").replace(/no/,"")),m=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/ogg;").replace(/no/,"")),s=b("boxShadow MozBoxShadow WebkitBoxShadow MsBoxShadow KhtmlBoxShadow OBoxShadow".split(" ")),t=!(!a.canvas.getContext||
!a.canvas.getContext("2d")),v=!!d.documentElement.classList,x;x=a.div.style.animationName?!0:b(["WebkitAnimationName","MozAnimationName","OAnimationName","msAnimationName","KhtmlAnimationName"]);var F=e("width","calc(100% - 10px)"),G=b(["columnCount","webkitColumnCount","MozColumnCount"]),H=b(["boxReflect","WebkitBoxRefect"]),E=!!a.style.styleSheet,I=!!f.CustomEvent,J=!!("draggable"in a.div),K=a.div.addEventListener,L=e("display","flex"),M=!!("geolocation"in navigator),N=!!d.getElementsByClassName,
O=function(c,e){try{return e=e||a.div,support=!1,c="on"+c,support=c in e,support||(e.setAttribute(c,"return;"),support="function"===h.type(e[c]),e.removeAttribute(c)),support}catch(b){return!1}}("hashchange",f),P=!(!f.history||!f.history.pushState),Q=e("background-color","hsla(0,0%,0%,0)"),R=function(){try{var a=["webkit","ms","moz"],c=!1;if(f.indexedDB&&f.IDBTransaction&&f.IDBKeyRange)c=!0;else for(var e=a.length;e--;)if(f[a[e]+"IndexedDB"]&&f[a[e]+"IDBTransaction"]&&f[a[e]+"IDBKeyRange"]){c=!0;
break}return c}catch(b){return!1}}(),S=g("autocomplete"),T=g("autofocus"),U=c("color"),V=c("date"),W=c("datetime"),X=c("datetime-local"),Y=c("email"),Z=g("list"),$=g("max"),aa=g("min"),ba=g("multiple"),ca=c("month"),da=c("number"),ea=g("pattern"),fa=g("placeholder"),ga=c("range"),ha=g("required"),ia=c("search"),ja=g("step"),ka=c("tel"),la=c("time"),ma=c("url"),na=c("week"),q;try{f.localStorage.setItem("test","test"),f.localStorage.removeItem("test"),q=!0}catch(Ja){q=!1}var y=function(){try{for(var a=
["linear-gradient","-webkit-linear-gradient","-moz-linear-gradient","-o-linear-gradient"],c=!1,b=a.length;b--;)if(e("background",a[b]+"(-45deg,rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%)")){c=!0;break}return c?c:e("background","-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,1)))")}catch(g){return!1}}(),oa=function(){try{var c=d.createElement("style"),e=!1;a.div.id="MediaTest";d.body.appendChild(a.div);c.textContent="@media screen and (min-width:1px) { #MediaTest { position:absolute; }}";
d.body.appendChild(c);f.getComputedStyle&&"absolute"==f.getComputedStyle(a.div).position&&(e=!0);a.div.style="";d.body.removeChild(a.div);d.body.removeChild(c);return e}catch(b){return!1}}(),pa="undefined"!==h.type(f.pageXOffset)&&"undefined"!==h.type(f.pageYOffset),qa=!!f.postMessage,ra=k(":active"),sa=k(":after"),ta=k("::after"),ua=k(":before"),va=k("::before"),wa=k(":focus"),xa=k(":hover"),ya=k("::first-letter"),za=k("::first-line"),Aa=k(":link"),Ba=k(":visited"),z=function(){try{for(var a=["radial-gradient",
"-webkit-radial-gradient","-moz-radial-gradient","-o-radial-gradient"],c=!1,b=a.length;b--;)if(e("background",a[b]+"(rgb(0,0,0) 0%,rgb(255,255,255) 100%)")){c=!0;break}return c?c:e("background","-webkit-gradient(radial, center center, 0px, center center, 100%, from(rgb(0,0,0)), to(rgb(255,255,255)))")}catch(g){return!1}}(),Ca=e("background-color","rgba(0,0,0,0)"),r;try{f.sessionStorage.setItem("test","test"),f.sessionStorage.removeItem("test"),r=!0}catch(Ka){r=!1}var Da=!!(-1<d.createElementNS("http://www.w3.org/2000/svg",
"animateMotion").toString().indexOf("SVG")),Ea=!(!d.createElementNS||!d.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Fa=b(["textShadow"]),Ga=!!("ontouchstart"in d.documentElement||f.navigator.msMaxTouchPoints),u=b(["transform","webkitTransform","MozTransform","msTransform","OTransform"]),A=function(){if(u)try{for(var a=["transform","webkitTransform","MozTransform","msTransform","OTransform"],c=!1,b=a.length;b--;)if(e(a[b],"translate3d(1px,1px,1px)")){c=!0;break}return c}catch(g){return!1}else return!1}(),
B=!(!a.video.canPlayType||!a.video.canPlayType("video/mp4;").replace(/no/,"")),C=!(!a.video.canPlayType||!a.video.canPlayType("video/ogg;").replace(/no/,"")),D=!(!a.video.canPlayType||!a.video.canPlayType("video/webm;").replace(/no/,"")),Ha=function(){try{var c=!1;try{a.canvas.getContext("webgl"),c=!0}catch(e){try{a.getContext("experimental-webgl"),c=!0}catch(b){c=!1}}return c}catch(g){return!1}}(),Ia=!(!f.WebSocket||!f.WebSocket.prototype.send);(function(){var c=d.head||d.getElementsByTagName("head")[0];
c.contains(a.style)&&c.removeChild(a.style)})();return{applicationCache:function(){return n},attachEvent:function(){return p},audio:function(){return{mp3:w,mp4:l,ogg:m}},audioMP3:function(){return w},audioMP4:function(){return l},audioOGG:function(){return m},boxShadow:function(){return s},canvas:function(){return t},classList:function(){return v},cssAnimation:function(){return x},cssCalc:function(){return F},cssColumn:function(){return G},cssReflection:function(){return H},customEvent:function(){return I},
dragAndDrop:function(){return J},eventListener:function(){return K},flexbox:function(){return L},geolocation:function(){return M},getElementsByClassName:function(){return N},gradient:function(){return{linear:y,radial:z}},hashchange:function(){return O},history:function(){return P},hsla:function(){return Q},html5Attribute:function(){return{autocomplete:S,autofocus:T,list:Z,max:$,min:aa,multiple:ba,pattern:ea,placeholder:fa,required:ha,step:ja}},html5Input:function(){return{color:U,date:V,dateTime:W,
dateTimeLocal:X,email:Y,month:ca,number:da,range:ga,search:ia,tel:ka,time:la,url:ma,week:na}},indexedDB:function(){return R},linearGradient:function(){return y},localStorage:function(){return q},mediaQueries:function(){return oa},pageOffset:function(){return pa},postMessage:function(){return qa},pseudoClass:function(){return{active:ra,after:sa,before:ua,focus:wa,hover:xa,link:Aa,visited:Ba}},pseudoElement:function(){return{after:ta,before:va,firstLetter:ya,firstLine:za}},radialGradient:function(){return z},
rgba:function(){return Ca},sessionStorage:function(){return r},smil:function(){return Da},storage:function(){return{local:q,session:r}},svg:function(){return Ea},textShadow:function(){return Fa},touchEvents:function(){return Ga},transform:function(){return{twoD:u,threeD:A}},transform2d:function(){return u},transform3d:function(){return A},video:function(){return{mp4:B,ogg:C,webM:D}},videoMP4:function(){return B},videoOGG:function(){return C},videoWebM:function(){return D},webGL:function(){return Ha},
webSocket:function(){return Ia}}}(),l=function(){function a(a){var g=e[a.name];if(0<g)for(var d in b)if(b[d])for(var f=b[d].length;f--;)b[d][f].token===g&&(delete e[a.name],b[d].splice(f,1));return this}var b={},e={},g=-1;return{getID:function(a){return e[a.name]},publish:function(a){var e=a.data||{},g,d;if(!b[a.topic])return!1;for(d=(g=b[a.topic])?g.length:0;d--;)g[d].func(e,a.topic);return this},subscribe:function(c){e[c.name]&&a(c);c.token=++g;switch(h.type(c.topic)){case "string":"array"!==h.type(b[c.topic])&&
(b[c.topic]=[]);b[c.topic].push({token:c.token,func:c.fn});break;case "array":for(var d=c.topic.length;d--;)"array"!==h.type(b[c.topic[d]])&&(b[c.topic[d]]=[]),b[c.topic[d]].push({token:c.token,func:c.fn});break;case "undefined":m("Must provide a topic to subscribe to; aborting processing.");break;default:m("Invalid topic type, must be either string or array; aborting processing.")}e[c.name]=c.token;return this},unsubscribe:a}}(),s=function(){var a=h(f),b=a.height(),e=a.width(),g=a.scrollTop(),c=
d.createElement("video"),k=function(){return c.requestFullScreen?{active:function(){return null!==d.fullscreenElement},element:function(){return d.fullscreenElement},enter:function(a){a.requestFullscreen()},exit:function(){d.exitFullscreen()}}:c.webkitRequestFullscreen?{active:function(){return null!==d.webkitFullscreenElement},element:function(){return d.webkitFullscreenElement},enter:function(a){a.webkitRequestFullscreen()},exit:function(){d.webkitExitFullscreen()}}:c.mozRequestFullScreen?{active:function(){return null!==
d.mozFullScreenElement},element:function(){return d.mozFullScreenElement},enter:function(a){a.mozRequestFullScreen()},exit:function(){d.mozCancelFullScreen()}}:c.msRequestFullscreen?{active:function(){return null!==d.msFullscreenElement},element:function(){return d.msFullscreenElement},enter:function(a){a.msRequestFullscreen()},exit:function(){d.msExitFullscreen()}}:{active:function(){return!1},element:function(){},enter:function(){m("Fullscreen API is not supported.")},exit:function(){m("Fullscreen API is not supported.")}}}(),
n=k.element(),p=k.active();a.off(".bolster.setWindowAttributes").on({"webkitfullscreenchange.bolster.setWindowAttributes mozfullscreenchange.bolster.setWindowAttributes fullscreenchange.bolster.setWindowAttributes MSFullscreenChange.bolster.setWindowAttributes":function(){n=k.element();p=k.active();l.publish({topic:"fullscreenChange",data:{active:p,element:n}})},"load.bolster.setWindowAttributes":function(a){l.publish({topic:"windowLoad",data:{event:a,height:b,originalState:a.originalEvent.state,
scrollTop:g,width:e}})},"resize.bolster.setWindowAttributes":function(){b=a.height();e=a.width();l.publish({topic:"windowResize",data:{height:b,width:e}})},"popstate.bolster.setWindowAttributes":function(a){l.publish({topic:"popstateChange",data:{event:a,originalState:a.originalEvent.state}})},"scroll.bolster.setWindowAttributes":function(){g=a.scrollTop();l.publish({topic:"windowScroll",data:{scrollTop:g}})}});return{dimensions:function(){return{width:e,height:b}},enterFullscreen:function(a){return k.enter(a)},
exitFullscreen:function(){return k.exit()},getFullscreenElement:function(){return n},height:function(){return b},isFullscreen:function(){return p},scrollTop:function(){return g},width:function(){return e},window:function(){return a}}}(),t=function(){var a=h(d),b=a.width(),e=a.height();a.off(".bolster.setDocumentAttributes").on({"load.bolster.setDocumentAttributes":function(){l.publish({topic:"documentLoad",data:{width:b,height:e}})},"resize.bolster.setDocumentAttributes":function(){b=a.width();e=
a.height();l.publish({topic:"documentSize",data:{width:b,height:e}})}});return{document:function(){return a},height:function(){return e},width:function(){return b}}}();pledge=function(){var a=function(){this.init=function(){this.resolved={};this.rejected={};this.cuid=this.puid=-1};this.resolve=function(a){this.cuid++;this.resolved[this.cuid]&&this.resolved[this.cuid].call(this,a)};this.reject=function(a){this.cuid++;this.rejected[this.cuid]&&this.rejected[this.cuid].call(this,a)};this.push=function(a,
b){this.puid++;"function"===h.type(a)?this.resolved[this.puid]=a:this.resolved[this.puid]=void 0;"function"===h.type(b)?this.rejected[this.puid]=b:this.rejected[this.puid]=function(a){m("Rejected: "+(a||""))}};this.init();return this},b=function(){var e=this;this.resolve=function(a){this.resolvePostpone=!0;this.resolveData=a};this.reject=function(a){this.rejectPostpone=!0;this.rejectData=a};this.pledge=function(){return(new a).start(function(){e.resolvePostpone?this.resolve(e.resolveData):e.rejectPostpone&&
this.reject(e.rejectData)})}};a.prototype={complete:function(a,b){this.push(a,b)},consecutive:function(a,b){for(var c="array"===h.type(b),d=a.length,f=0,d=a.length;f<d;f++)c?this.push(a[f],b[f]):this.push(a[f],b);return this},concurrent:function(b,d){if("undefined"===h.type(d)||"function"===h.type(d)){var c=function(c,b,e){(new a).start(function(){c.call(this,e)}).complete(function(a){l.push(a);l.length===f&&b.resolve(l)})},f=b.length,l=[];return this.proceed(function(a){for(var d=b.length;d--;)c(b[d],
this,a)},d)}this.init();m("Parameter passed is not a valid type for this method.")},proceed:function(a,b){this.push(a,b);return this},start:function(a){if("function"===h.type(a)){var b=this;f.setTimeout(function(){a.call(b)},0);return b}},wait:function(a,b){var c=this,d;a||m("Value of delay must be provided.");switch(h.type(b)){case "boolean":d=b;break;case "function":d=b();break;default:d=!0}return c.proceed(function(b){f.setTimeout(function(){d?c.resolve.call(c,b):c.reject.call(c,"Test did not pass.")},
a)})}};h.extend({pledge:function(b){if("function"===h.type(b))return(new a).start(b);m("Parameter passed is not a valid type for this method.")},postpone:function(){return new b}})}();helpFuncs={loadImg:function(a,b,e,d){if("function"===h.type(d)){var c=new Image;c.src=a.src;c.complete||4===c.readyState||"complete"===c.readyState?d.call(a,{height:a.height,naturalHeight:c.naturalHeight||c.height,naturalWidth:c.naturalWidth||c.width,percentComplete:Math.floor(100*(b+1)/e),src:a.src,width:a.width}):
(c.onload=function(){d.call(a,{height:a.height,naturalHeight:c.naturalHeight||c.height,naturalWidth:c.naturalWidth||c.width,percentComplete:Math.floor(100*(b+1)/e),src:a.src,width:a.width})},c.src=a.src)}},naturalDimensions:function(){return"naturalWidth"in new Image?function(a){var b=new Image;b.src=a.src;return{height:b.naturalHeight,width:b.naturalWidth}}:function(a){var b=new Image;b.src=a.src;b.onload=function(){return{height:this.height,width:this.width}}}}(),getPage:function(a){if(Array.prototype.lastIndexOf)return a.substring(a.lastIndexOf("/")+
1);a=a.split("/");return a[a.length-1].split("?")[0]}};h.extend({document:function(a){return a?t[a]():t.document()},page:function(a){return helpFuncs.getPage(a||f.location.href)},publish:function(a){return l.publish(a)},subscribe:function(a){return l.subscribe(a)},supports:function(a){return v[a]()},unsubscribe:function(a){return l.unsubscribe(a)},window:function(a){return a?s[a]():s.window()}});h.fn.extend({active:function(a){return this.hasClass(a||"active")},activate:function(a,b){a=a||"active";
return b?this.deactivate(a,b).addClass(a):this.deactivate(a).addClass(a)},deactivate:function(a,b){a=a||"active";b?this.parents("."+b).find("."+a).removeClass(a):this.parent().find("."+a).removeClass(a);return this},imgLoad:function(a,b){var d=this.length;return b&&0<b?this.each(function(g){var c=this;f.setTimeout(function(){helpFuncs.loadImg(c,g,d,a)},b*g)}):this.each(function(b){helpFuncs.loadImg(this,b,d,a)})},naturalHeight:function(){return helpFuncs.naturalDimensions(this.get(0)).height},naturalWidth:function(){return helpFuncs.naturalDimensions(this.get(0)).width},
unselectable:function(a){(a?this:this.add(this.find("*"))).attr({unselectable:"on"}).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});return this},unstyle:function(a){switch(h.type(a)){case "string":return this.css(a,"");case "array":for(var b={},d=a.length;d--;)b[a[d]]="";return this.css(b);case "undefined":return this.removeAttr("style");default:return throwwError("Parameter passed in is not of appropriate type; processing aborted."),
this}}})})(window,document,jQuery);
