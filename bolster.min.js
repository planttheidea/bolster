/*
 *
 * Copyright 2014 Tony Quetano under the terms of the MIT
 * license found at https://github.com/planttheidea/bolster/MIT_License.txt
 *
 * Bolster.js - An augmentation library for jQuery
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
*/
(function(h,c,n){var p=function(a){throw Error(a);},x=function(){var a={audio:c.createElement("audio"),canvas:c.createElement("canvas"),document:c.documentElement||c.body,div:c.createElement("div"),input:c.createElement("input"),p:c.createElement("p"),style:c.createElement("style"),video:c.createElement("video")},k=function(d){try{for(var b=!1,c=d.length;c--;)if(d[c]in a.document.style){b=!0;break}return b}catch(l){return!1}},f=function(d,b){try{var c=a.div.style[d];a.div.style[d]=b;return c!==a.div.style[d]?
(a.div.style[d]="",!0):!1}catch(l){return!1}},g=function(d){return d in a.input},e=function(d){try{var b=a.input.type;a.input.type=d;return b!==a.input.type?(a.input.type="text",!0):!1}catch(c){return!1}},b=function(d){try{var b=c.head||c.getElementsByTagName("head")[0],l=a.style.sheet||a.style.styleSheet;a.style.type="text/css";b.appendChild(a.style);return l&&d?(s?function(a){l.cssText=a+" { }";return 0!==l.cssText.length&&!/unknown/i.test(l.cssText)&&0===l.cssText.indexOf(a)}:function(a){try{l.insertRule(a+
"{ }",0),l.deleteRule(l.cssRules.length-1)}catch(d){return!1}return!0})(d):!1}catch(k){return!1}};b("test");var t=!!h.applicationCache,r=a.div.attachEvent,m=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mpeg;").replace(/no/,"")),l=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mp4;").replace(/no/,"")),d=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/ogg;").replace(/no/,"")),u=k("boxShadow MozBoxShadow WebkitBoxShadow MsBoxShadow KhtmlBoxShadow OBoxShadow".split(" ")),v=!(!a.canvas.getContext||
!a.canvas.getContext("2d")),w=!!c.documentElement.classList,p;p=a.div.style.animationName?!0:k(["WebkitAnimationName","MozAnimationName","OAnimationName","msAnimationName","KhtmlAnimationName"]);var z=f("width","calc(100% - 10px)"),q=k(["columnCount","webkitColumnCount","MozColumnCount"]),M=k(["boxReflect","WebkitBoxRefect"]),s=!!a.style.styleSheet,N=!!h.CustomEvent,x=!!("draggable"in a.div),O=a.div.addEventListener,y=f("display","flex"),C=!!("geolocation"in navigator),D=!!c.getElementsByClassName,
P=function(d,b){try{return b=b||a.div,support=!1,d="on"+d,support=d in b,support||(b.setAttribute(d,"return;"),support="function"===n.type(b[d]),b.removeAttribute(d)),support}catch(l){return!1}}("hashchange",h),Q=!(!h.history||!h.history.pushState),R=f("background-color","hsla(0,0%,0%,0)"),S=function(){try{var a=["webkit","ms","moz"],d=!1;if(h.indexedDB&&h.IDBTransaction&&h.IDBKeyRange)d=!0;else for(var b=a.length;b--;)if(h[a[b]+"IndexedDB"]&&h[a[b]+"IDBTransaction"]&&h[a[b]+"IDBKeyRange"]){d=!0;
break}return d}catch(l){return!1}}(),T=g("autocomplete"),U=g("autofocus"),V=e("color"),W=e("date"),X=e("datetime"),Y=e("datetime-local"),Z=e("email"),$=g("list"),aa=g("max"),ba=g("min"),ca=g("multiple"),da=e("month"),ea=e("number"),fa=g("pattern"),ga=g("placeholder"),ha=e("range"),ia=g("required"),ja=e("search"),ka=g("step"),la=e("tel"),ma=e("time"),na=e("url"),oa=e("week"),A;try{h.localStorage.setItem("test","test"),h.localStorage.removeItem("test"),A=!0}catch(La){A=!1}var G=function(){try{for(var a=
["linear-gradient","-webkit-linear-gradient","-moz-linear-gradient","-o-linear-gradient"],d=!1,b=a.length;b--;)if(f("background",a[b]+"(-45deg,rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%)")){d=!0;break}return d?d:f("background","-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,1)))")}catch(l){return!1}}(),pa=function(){try{var d=c.createElement("style"),b=!1;a.div.id="MediaTest";c.body.appendChild(a.div);d.textContent="@media screen and (min-width:1px) { #MediaTest { position:absolute; }}";
c.body.appendChild(d);h.getComputedStyle&&"absolute"==h.getComputedStyle(a.div).position&&(b=!0);a.div.style="";c.body.removeChild(a.div);c.body.removeChild(d);return b}catch(l){return!1}}(),qa="undefined"!==n.type(h.pageXOffset)&&"undefined"!==n.type(h.pageYOffset),ra=!!h.postMessage,sa=b(":active"),ta=b(":after"),ua=b("::after"),va=b(":before"),wa=b("::before"),xa=b(":focus"),ya=b(":hover"),za=b("::first-letter"),Aa=b("::first-line"),Ba=b(":link"),Ca=b(":visited"),H=function(){try{for(var a=["radial-gradient",
"-webkit-radial-gradient","-moz-radial-gradient","-o-radial-gradient"],d=!1,b=a.length;b--;)if(f("background",a[b]+"(rgb(0,0,0) 0%,rgb(255,255,255) 100%)")){d=!0;break}return d?d:f("background","-webkit-gradient(radial, center center, 0px, center center, 100%, from(rgb(0,0,0)), to(rgb(255,255,255)))")}catch(l){return!1}}(),Da=f("background-color","rgba(0,0,0,0)"),B;try{h.sessionStorage.setItem("test","test"),h.sessionStorage.removeItem("test"),B=!0}catch(Ma){B=!1}var Ea=!!(-1<c.createElementNS("http://www.w3.org/2000/svg",
"animateMotion").toString().indexOf("SVG")),Fa=!(!c.createElementNS||!c.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Ga=k(["textShadow"]),Ha=!!("ontouchstart"in c.documentElement||h.navigator.msMaxTouchPoints),E=k(["transform","WebkitTransform","MozTransform","msTransform","OTransform"]),I=function(){if(E)try{for(var a=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],d=!1,b=a.length;b--;)if(f(a[b],"translate3d(1px,1px,1px)")){d=!0;break}return d}catch(l){return!1}else return!1}(),
Ia=k(["transition","WebkitTransition","MozTransition","OTransition"]),J=!(!a.video.canPlayType||!a.video.canPlayType("video/mp4;").replace(/no/,"")),K=!(!a.video.canPlayType||!a.video.canPlayType("video/ogg;").replace(/no/,"")),L=!(!a.video.canPlayType||!a.video.canPlayType("video/webm;").replace(/no/,"")),Ja=function(){try{var d=!1;try{a.canvas.getContext("webgl"),d=!0}catch(b){try{a.getContext("experimental-webgl"),d=!0}catch(l){d=!1}}return d}catch(c){return!1}}(),Ka=!(!h.WebSocket||!h.WebSocket.prototype.send);
(function(){var d=c.head||c.getElementsByTagName("head")[0];d.contains(a.style)&&d.removeChild(a.style)})();return{applicationCache:function(){return t},attachEvent:function(){return r},audio:function(){return{mp3:m,mp4:l,ogg:d}},audioMP3:function(){return m},audioMP4:function(){return l},audioOGG:function(){return d},boxShadow:function(){return u},canvas:function(){return v},classList:function(){return w},cssAnimation:function(){return p},cssCalc:function(){return z},cssColumn:function(){return q},
cssReflection:function(){return M},customEvent:function(){return N},dragAndDrop:function(){return x},eventListener:function(){return O},flexbox:function(){return y},geolocation:function(){return C},getElementsByClassName:function(){return D},gradient:function(){return{linear:G,radial:H}},hashchange:function(){return P},history:function(){return Q},hsla:function(){return R},html5Attribute:function(){return{autocomplete:T,autofocus:U,list:$,max:aa,min:ba,multiple:ca,pattern:fa,placeholder:ga,required:ia,
step:ka}},html5Input:function(){return{color:V,date:W,dateTime:X,dateTimeLocal:Y,email:Z,month:da,number:ea,range:ha,search:ja,tel:la,time:ma,url:na,week:oa}},indexedDB:function(){return S},linearGradient:function(){return G},localStorage:function(){return A},mediaQueries:function(){return pa},pageOffset:function(){return qa},postMessage:function(){return ra},pseudoClass:function(){return{active:sa,after:ta,before:va,focus:xa,hover:ya,link:Ba,visited:Ca}},pseudoElement:function(){return{after:ua,
before:wa,firstLetter:za,firstLine:Aa}},radialGradient:function(){return H},rgba:function(){return Da},sessionStorage:function(){return B},smil:function(){return Ea},storage:function(){return{local:A,session:B}},svg:function(){return Fa},textShadow:function(){return Ga},touchEvents:function(){return Ha},transform:function(){return{twoD:E,threeD:I}},transform2d:function(){return E},transform3d:function(){return I},transition:function(){return Ia},video:function(){return{mp4:J,ogg:K,webM:L}},videoMP4:function(){return J},
videoOGG:function(){return K},videoWebM:function(){return L},webGL:function(){return Ja},webSocket:function(){return Ka}}}(),q=function(){function a(a){if(0<g[a])for(var c in f)if(f[c])for(var e=f[c].length;e--;)f[c][e].token===g[a]&&(delete g[a],f[c].splice(e,1))}function c(b,e,k,g,l){"array"!==n.type(f[b])&&(f[b]=[]);g&&(k=function(){k.call();a(l)});f[b].push({token:e,func:k})}var f={},g={},e=-1;return{getID:function(a){return g[a.name]},publish:function(a){var c=a.data||{},e,k;if(!f[a.topic])return!1;
for(k=(e=f[a.topic])?e.length:0;k--;)e[k].func(c,a.topic);return this},subscribe:function(b){if("string"!==n.type(b.name))return p("Name passed is not a string."),!1;g[b.name]&&a(b.name);switch(n.type(b.topic)){case "string":c(b.topic,b.token,b.fn,b.once,b.name);break;case "array":for(var f=b.topic.length;f--;)c(b.topic[f],b.token,b.fn,b.once,b.name);break;case "undefined":p("Must provide a topic to subscribe to.");break;default:p("Invalid topic type, must be either string or array.")}g[b.name]=++e;
return this},unsubscribe:function(b){switch(n.type(b.name)){case "string":a(b.name);break;case "array":for(var c=b.name.length;c--;)a(b.name[c]);break;default:p("Name passed is not of valid type.")}return this}}}(),C=function(){function a(a){return{fullscreenActive:l,fullscreenElement:m,hash:w,height:g,hostname:F,href:u,page:v,queryString:s,scrollTop:b,width:e}}function k(){w=h.location.hash.replace("#","")}var f=n(h),g=f.height(),e=f.width(),b=f.scrollTop(),t=c.createElement("video"),r=function(){return t.requestFullScreen?
{active:function(){return null!==c.fullscreenElement},element:function(){return c.fullscreenElement},enter:function(a){a.requestFullscreen()},exit:function(){c.exitFullscreen()}}:t.webkitRequestFullscreen?{active:function(){return null!==c.webkitFullscreenElement},element:function(){return c.webkitFullscreenElement},enter:function(a){a.webkitRequestFullscreen()},exit:function(){c.webkitExitFullscreen()}}:t.mozRequestFullScreen?{active:function(){return null!==c.mozFullScreenElement},element:function(){return c.mozFullScreenElement},
enter:function(a){a.mozRequestFullScreen()},exit:function(){c.mozCancelFullScreen()}}:t.msRequestFullscreen?{active:function(){return null!==c.msFullscreenElement},element:function(){return c.msFullscreenElement},enter:function(a){a.msRequestFullscreen()},exit:function(){c.msExitFullscreen()}}:{active:function(){return!1},element:function(){},enter:function(){p("Fullscreen API is not supported.")},exit:function(){p("Fullscreen API is not supported.")}}}(),m=r.element(),l=r.active(),d=function(){return Array.prototype.lastIndexOf?
function(a){return a.substring(a.lastIndexOf("/")+1).split("#")[0].split("?")[0]}:function(a){a=a.split("/");return a[a.length-1].split("#")[0].split("?")[0]}}(),u=h.location.href,v=d(u),w=h.location.hash.replace("#",""),F=h.location.hostname||h.location.host,z=function(){for(var a=h.location.search.substr(1).split("&"),d={},b=0,c=a.length;b<c;b++){var l=a[b].split("=");0<l[0].length&&(d[l[0]]=l[1])}return d},s=z();f.off(".bolster.setWindowAttributes").on({"webkitfullscreenchange.bolster.setWindowAttributes mozfullscreenchange.bolster.setWindowAttributes fullscreenchange.bolster.setWindowAttributes MSFullscreenChange.bolster.setWindowAttributes":function(){m=
r.element();l=r.active();q.publish({topic:"fullscreenChange",data:{fullscreenActive:l,fullscreenElement:m}})},"load.bolster.setWindowAttributes":function(d){q.publish({topic:"windowLoad",data:a(d)})},"hashchange.bolster.setWindowAttributes":k,"resize.bolster.setWindowAttributes":function(){g=f.height();e=f.width();q.publish({topic:"windowResize",data:{height:g,width:e}})},"popstate.bolster.setWindowAttributes":function(a){q.publish({topic:"popstateChange",data:{event:a,originalState:a.originalEvent.state}});
k();u=h.location.href;z();v=d(h.location.href)},"scroll.bolster.setWindowAttributes":function(){b=f.scrollTop();q.publish({topic:"windowScroll",data:{scrollTop:b}})}});return{attributes:a,dimensions:function(){return{width:e,height:g}},enterFullscreen:function(a){return r.enter(a)},exitFullscreen:function(){return r.exit()},fullscreenElement:function(){return m},hash:function(){return w},height:function(){return g},hostname:function(){return F},href:function(){return u},isFullscreen:function(){return l},
page:function(){return v},queryString:function(){return s},scrollTop:function(){return b},width:function(){return e},window:function(){return f}}}(),D=function(){function a(){return{anchors:c.anchors,characterSet:e,cookies:m,forms:c.forms,height:g,referrer:l,styleSheets:h,styleSheetSets:p,title:c.title,uri:b,width:f}}var k=n(c),f=k.width(),g=k.height(),e=c.characterSet||c.charset,b=c.documentURI,h=c.styleSheets,p=c.styleSheetSets,m=function(){for(var a=c.cookie.split(";"),b={},l,e=0,k=a.length;e<
k;e++){var g=a[e].split("=");switch(g[0]){case "expires":case "domain":case "path":case "secure":addMe=!1;b[l]+=";"+g[1];break;case "":break;default:addMe=!0,l=g[0],b[l]=g[1]}}return b}(),l=c.referrer;k.off(".bolster.setDocumentAttributes").on({"load.bolster.setDocumentAttributes":function(){q.publish({topic:"documentLoad",data:a()})},"resize.bolster.setDocumentAttributes":function(){f=k.width();g=k.height();q.publish({topic:"documentResize",data:{height:g,width:f}})}});return{anchors:function(){return c.anchors},
attributes:a,characterSet:function(){return e},cookies:function(){return m},deleteCookie:function(a){switch(n.type(a)){case "array":for(var b=a.length;b--;)delete m[a[b]],c.cookie=encodeURIComponent(a[b])+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT";break;case "string":delete m[a],c.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"}},document:function(){return k},forms:function(){return c.forms},height:function(){return g},images:function(){return c.images},links:function(){return c.links},
referrer:function(){return l},setCookie:function(a){switch(n.type(a)){case "object":for(var b in a)a.hasOwnProperty(b)&&(m[b]=a[b],c.cookie=encodeURIComponent(b)+"="+encodeURIComponent(m[b]));break;case "string":a=a.split("="),m[a[0]]=a[1],c.cookie=encodeURIComponent(a[0])+"="+encodeURIComponent(a[1])}},styleSheets:function(){return h},styleSheetSets:function(){return p},title:function(){return c.title},uri:function(){return b},width:function(){return f}}}(),y=function(){function a(a,d){if("local"===
a)switch(n.type(d)){case "array":for(var b={},c=0,k=d.length;c<k;c++)b[d[c]]=e[d[c]];return b;case "string":return e[d];case "undefined":return e;default:p("Parameter passed is invalid.")}else if("session"===a)switch(n.type(d)){case "array":b={};c=0;for(k=d.length;c<k;c++)b[d[c]]=g[d[c]];return b;case "string":return g[d];case "undefined":return g;default:p("Parameter passed is invalid.")}}var k=x.sessionStorage(),f=x.localStorage(),g={},e={},b=function(){return k&&f?function(a,d){if("object"===n.type(d))for(var b in d)d.hasOwnProperty(b)&&
(a?h.localStorage[b]=e[b]=d[b]:h.sessionStorage[b]=g[b]=d[b]);else p("Parameter passed must be an object.")}:function(a,b){if("object"===n.type(b))for(var k in b){if(b.hasOwnProperty(k)){var f,h=a;f=b[k].replace("; ",";").split(";").sort();var m=f.length,h=encodeURIComponent(f[0])+(h?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"");if(1<m)for(;m--;){var q=f[m].split("=");switch(q[0]){case "path":case "domain":h+="; "+q[0]+"="+q[1];break;case "secure":h+="; secure"}}f=h;a?e[k]=f.split("; ")[0]:g[k]=f.split("; ")[0];
c.cookie=encodeURIComponent(k)+"="+f}}else p("Parameter passed must be an object.")}}(),q=function(a,b){a&&e.hasOwnProperty(b)?(h.localStorage.removeItem(b),delete e[b]):g.hasOwnProperty(b)&&(h.sessionStorage.removeItem(b),delete g[b])},r=function(a,b){a&&e.hasOwnProperty(b)?(c.cookie=encodeURIComponent(b)+e[b].split("; ").push("; expires=Thu, 01 Jan 1970 00:00:00 GMT").sort().join("; "),delete e[b]):g.hasOwnProperty(b)&&(c.cookie=encodeURIComponent(b)+g[b].split("; ").push("; expires=Thu, 01 Jan 1970 00:00:00 GMT").sort().join("; "),
delete g[b])},m=function(){return k&&f?function(a,b){switch(n.type(b)){case "array":for(var c=b.length;c--;)q(a,b[c]);break;case "string":q(a,b);break;case "object":q("local"===b.type,b.keys);break;default:p("Parameter passed is invalid.")}}:function(a,b){switch(n.type(b)){case "array":for(var c=b.len;c--;)r(a,b[c]);break;case "string":r(a,b);break;case "object":r("local"===b.type,b.keys);break;default:p("Parameter passed is invalid.")}}}();return{local:function(c){switch(c.length){case 0:return a("local");
case 1:if("object"===n.type(c[0]))b(!0,c[0]);else return a("local",c[0]);break;case 2:b(!0,c[0],c[1]);break;default:p("Parameter passed is not a valid type.")}},remove:function(a){switch(a.length){case 0:h.localStorage.clear();h.sessionStorage.clear();e=g={};break;case 1:switch(n.type(a[0])){case "string":case "array":m(!0,a[0]);m(!1,a[0]);break;case "object":if("undefined"===n.type(a[0].type))m(!0,a[0].keys),m(!1,a[0].keys);else switch(a[0].type){case "local":m(!0,a[0].keys);break;case "session":m(!1,
a[0].keys);break;default:p("Invalid value for storage type.")}}break;case 2:switch(a[1]){case "local":m(!0,a[0]);break;case "session":m(!1,a[0]);break;default:m(!0,a[0]),m(!1,a[0])}}},session:function(c){switch(c.length){case 0:return a("session");case 1:if("object"===n.type(c[0]))b(!1,c[0]);else return a("session",c[0]);break;case 2:b(!1,c[0],c[1]);break;default:p("Parameter passed is not a valid type.")}}}}(),s={loadImg:function(a,c,f,g){if("function"===n.type(g)){var e=new Image;e.src=a.src;e.complete||
4===e.readyState||"complete"===e.readyState?g.call(a,{height:a.height,naturalHeight:e.naturalHeight||e.height,naturalWidth:e.naturalWidth||e.width,percentComplete:Math.floor(100*(c+1)/f),src:a.src,width:a.width}):(e.onload=function(){g.call(a,{height:a.height,naturalHeight:e.naturalHeight||e.height,naturalWidth:e.naturalWidth||e.width,percentComplete:Math.floor(100*(c+1)/f),src:a.src,width:a.width})},e.src=a.src)}},naturalDimensions:{height:function(a){var c=new Image;c.onload=function(){return c.naturalHeight||
c.height};c.src=a.src},width:function(a){var c=new Image;c.onload=function(){return c.naturalWidth||c.width};c.src=a.src}}};n.extend({document:function(a,c){return a?D[a](c):D.document()},localStorage:function(){return y.local(arguments)},pledge:function(a){if("function"===n.type(a))return(new Pledge).start(a);p("Must pass function into $.pledge.")},postpone:function(){return new Postpone},publish:function(a){return q.publish(a)},removeStorage:function(){return y.remove(arguments)},sessionStorage:function(){return y.session(arguments)},
subscribe:function(a){return q.subscribe(a)},supports:function(a){return x[a]()},unsubscribe:function(a){return q.unsubscribe(a)},window:function(a,c){return a?C[a](c):C.window()}});n.fn.extend({active:function(a){return this.hasClass(a||"active")},activate:function(a,c){a=a||"active";return c?this.deactivate(a,c).addClass(a):this.deactivate(a).addClass(a)},deactivate:function(a,c){a=a||"active";c?this.parents("."+c).find("."+a).removeClass(a):this.parent().find("."+a).removeClass(a);return this},
imgLoad:function(a,c){var f=this.length;return c&&0<c?this.each(function(g){var e=this;h.setTimeout(function(){s.loadImg(e,g,f,a)},c*g)}):this.each(function(c){s.loadImg(this,c,f,a)})},naturalHeight:function(){return s.naturalDimensions.height(this.get(0))},naturalWidth:function(){return s.naturalDimensions.width(this.get(0))},unselectable:function(a){(a?this:this.add(this.find("*"))).attr({unselectable:"on"}).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none",
"-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});return this},unstyle:function(a){switch(n.type(a)){case "string":return this.css(a,"");case "array":for(var c={},f=a.length;f--;)c[a[f]]="";return this.css(c);case "undefined":return this.removeAttr("style");default:return p("Parameter passed in is not of appropriate type; processing aborted."),this}}})})(window,document,jQuery);
