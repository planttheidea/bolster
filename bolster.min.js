/*
 *
 * Copyright 2014 Tony Quetano under the terms of the MIT
 * license found at https://github.com/planttheidea/bolster/MIT_License.txt
 *
 * Bolster.js - An augmentation library for jQuery
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
*/
(function(g,e,k){var n=function(a){throw Error(a);},v=function(){var a={audio:e.createElement("audio"),canvas:e.createElement("canvas"),div:e.createElement("div"),input:e.createElement("input"),p:e.createElement("p"),style:e.createElement("style"),video:e.createElement("video")},b=function(c){try{for(var b=!1,d=c.length;d--;)if("undefined"!==a.div.style[c[d]]){b=!0;break}return b}catch(f){return!1}},d=function(c,b){try{var d=a.div.style[c];a.div.style[c]=b;return d!==a.div.style[c]?(a.div.style[c]=
"",!0):!1}catch(f){return!1}},h=function(c){return c in a.input},f=function(c){try{var b=a.input.type;a.input.type=c;return b!==a.input.type?(a.input.type="text",!0):!1}catch(d){return!1}},c=function(c){try{var b=e.head||e.getElementsByTagName("head")[0],d=a.style.sheet||a.style.styleSheet;a.style.type="text/css";b.appendChild(a.style);return d&&c?(E?function(a){d.cssText=a+" { }";return 0!==d.cssText.length&&!/unknown/i.test(d.cssText)&&0===d.cssText.indexOf(a)}:function(a){try{d.insertRule(a+"{ }",
0),d.deleteRule(d.cssRules.length-1)}catch(c){return!1}return!0})(c):!1}catch(f){return!1}};c("test");var F=!!g.applicationCache,p=a.div.attachEvent,w=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mpeg;").replace(/no/,"")),l=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mp4;").replace(/no/,"")),n=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/ogg;").replace(/no/,"")),m=b("boxShadow MozBoxShadow WebkitBoxShadow MsBoxShadow KhtmlBoxShadow OBoxShadow".split(" ")),s=!(!a.canvas.getContext||
!a.canvas.getContext("2d")),t=!!e.documentElement.classList,x;x=a.div.style.animationName?!0:b(["WebkitAnimationName","MozAnimationName","OAnimationName","msAnimationName","KhtmlAnimationName"]);var v=d("width","calc(100% - 10px)"),G=b(["columnCount","webkitColumnCount","MozColumnCount"]),H=b(["boxReflect","WebkitBoxRefect"]),E=!!a.style.styleSheet,I=!!g.CustomEvent,J=!!("draggable"in a.div),K=a.div.addEventListener,L=d("display","flex"),M=!!("geolocation"in navigator),N=!!e.getElementsByClassName,
O=function(c,b){try{return b=b||a.div,support=!1,c="on"+c,support=c in b,support||(b.setAttribute(c,"return;"),support="function"===k.type(b[c]),b.removeAttribute(c)),support}catch(d){return!1}}("hashchange",g),P=!(!g.history||!g.history.pushState),Q=d("background-color","hsla(0,0%,0%,0)"),R=function(){try{var a=["webkit","ms","moz"],c=!1;if(g.indexedDB&&g.IDBTransaction&&g.IDBKeyRange)c=!0;else for(var b=a.length;b--;)if(g[a[b]+"IndexedDB"]&&g[a[b]+"IDBTransaction"]&&g[a[b]+"IDBKeyRange"]){c=!0;
break}return c}catch(d){return!1}}(),S=h("autocomplete"),T=h("autofocus"),U=f("color"),V=f("date"),W=f("datetime"),X=f("datetime-local"),Y=f("email"),Z=h("list"),$=h("max"),aa=h("min"),ba=h("multiple"),ca=f("month"),da=f("number"),ea=h("pattern"),fa=h("placeholder"),ga=f("range"),ha=h("required"),ia=f("search"),ja=h("step"),ka=f("tel"),la=f("time"),ma=f("url"),na=f("week"),q;try{g.localStorage.setItem("test","test"),g.localStorage.removeItem("test"),q=!0}catch(Ja){q=!1}var y=function(){try{for(var a=
["linear-gradient","-webkit-linear-gradient","-moz-linear-gradient","-o-linear-gradient"],c=!1,b=a.length;b--;)if(d("background",a[b]+"(-45deg,rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%)")){c=!0;break}return c?c:d("background","-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,1)))")}catch(f){return!1}}(),oa=function(){try{var c=e.createElement("style"),b=!1;a.div.id="MediaTest";e.body.appendChild(a.div);c.textContent="@media screen and (min-width:1px) { #MediaTest { position:absolute; }}";
e.body.appendChild(c);g.getComputedStyle&&"absolute"==g.getComputedStyle(a.div).position&&(b=!0);a.div.style="";e.body.removeChild(a.div);e.body.removeChild(c);return b}catch(d){return!1}}(),pa="undefined"!==k.type(g.pageXOffset)&&"undefined"!==k.type(g.pageYOffset),qa=!!g.postMessage,ra=c(":active"),sa=c(":after"),ta=c("::after"),ua=c(":before"),va=c("::before"),wa=c(":focus"),xa=c(":hover"),ya=c("::first-letter"),za=c("::first-line"),Aa=c(":link"),Ba=c(":visited"),z=function(){try{for(var a=["radial-gradient",
"-webkit-radial-gradient","-moz-radial-gradient","-o-radial-gradient"],c=!1,b=a.length;b--;)if(d("background",a[b]+"(rgb(0,0,0) 0%,rgb(255,255,255) 100%)")){c=!0;break}return c?c:d("background","-webkit-gradient(radial, center center, 0px, center center, 100%, from(rgb(0,0,0)), to(rgb(255,255,255)))")}catch(f){return!1}}(),Ca=d("background-color","rgba(0,0,0,0)"),r;try{g.sessionStorage.setItem("test","test"),g.sessionStorage.removeItem("test"),r=!0}catch(Ka){r=!1}var Da=!!(-1<e.createElementNS("http://www.w3.org/2000/svg",
"animateMotion").toString().indexOf("SVG")),Ea=!(!e.createElementNS||!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Fa=b(["textShadow"]),Ga=!!("ontouchstart"in e.documentElement||g.navigator.msMaxTouchPoints),u=b(["transform","webkitTransform","MozTransform","msTransform","OTransform"]),A=function(){if(u)try{for(var a=["transform","webkitTransform","MozTransform","msTransform","OTransform"],c=!1,b=a.length;b--;)if(d(a[b],"translate3d(1px,1px,1px)")){c=!0;break}return c}catch(f){return!1}else return!1}(),
B=!(!a.video.canPlayType||!a.video.canPlayType("video/mp4;").replace(/no/,"")),C=!(!a.video.canPlayType||!a.video.canPlayType("video/ogg;").replace(/no/,"")),D=!(!a.video.canPlayType||!a.video.canPlayType("video/webm;").replace(/no/,"")),Ha=function(){try{var c=!1;try{a.canvas.getContext("webgl"),c=!0}catch(b){try{a.getContext("experimental-webgl"),c=!0}catch(d){c=!1}}return c}catch(f){return!1}}(),Ia=!(!g.WebSocket||!g.WebSocket.prototype.send);(function(){var c=e.head||e.getElementsByTagName("head")[0];
c.contains(a.style)&&c.removeChild(a.style)})();return{applicationCache:function(){return F},attachEvent:function(){return p},audio:function(){return{mp3:w,mp4:l,ogg:n}},audioMP3:function(){return w},audioMP4:function(){return l},audioOGG:function(){return n},boxShadow:function(){return m},canvas:function(){return s},classList:function(){return t},cssAnimation:function(){return x},cssCalc:function(){return v},cssColumn:function(){return G},cssReflection:function(){return H},customEvent:function(){return I},
dragAndDrop:function(){return J},eventListener:function(){return K},flexbox:function(){return L},geolocation:function(){return M},getElementsByClassName:function(){return N},gradient:function(){return{linear:y,radial:z}},hashchange:function(){return O},history:function(){return P},hsla:function(){return Q},html5Attribute:function(){return{autocomplete:S,autofocus:T,list:Z,max:$,min:aa,multiple:ba,pattern:ea,placeholder:fa,required:ha,step:ja}},html5Input:function(){return{color:U,date:V,dateTime:W,
dateTimeLocal:X,email:Y,month:ca,number:da,range:ga,search:ia,tel:ka,time:la,url:ma,week:na}},indexedDB:function(){return R},linearGradient:function(){return y},localStorage:function(){return q},mediaQueries:function(){return oa},pageOffset:function(){return pa},postMessage:function(){return qa},pseudoClass:function(){return{active:ra,after:sa,before:ua,focus:wa,hover:xa,link:Aa,visited:Ba}},pseudoElement:function(){return{after:ta,before:va,firstLetter:ya,firstLine:za}},radialGradient:function(){return z},
rgba:function(){return Ca},sessionStorage:function(){return r},smil:function(){return Da},storage:function(){return{local:q,session:r}},svg:function(){return Ea},textShadow:function(){return Fa},touchEvents:function(){return Ga},transform:function(){return{twoD:u,threeD:A}},transform2d:function(){return u},transform3d:function(){return A},video:function(){return{mp4:B,ogg:C,webM:D}},videoMP4:function(){return B},videoOGG:function(){return C},videoWebM:function(){return D},webGL:function(){return Ha},
webSocket:function(){return Ia}}}(),l=function(){function a(a){if(0<e[a])for(var b in d)if(d[b])for(var f=d[b].length;f--;)d[b][f].token===e[a]&&(delete e[a],d[b].splice(f,1))}function b(a,b,f){"array"!==k.type(d[a])&&(d[a]=[]);d[a].push({token:b,func:f})}var d={},e={},f=-1;return{getID:function(a){return e[a.name]},publish:function(a){var b=a.data||{},f,e;if(!d[a.topic])return!1;for(e=(f=d[a.topic])?f.length:0;e--;)f[e].func(b,a.topic);return this},subscribe:function(c){if("string"!==k.type(c.name))return n("Name passed is not a string."),
!1;e[c.name]&&a(c.name);switch(k.type(c.topic)){case "string":b(c.topic,c.token,c.fn);break;case "array":for(var d=c.topic.length;d--;)b(c.topic[d],c.token,c.fn);break;case "undefined":n("Must provide a topic to subscribe to.");break;default:n("Invalid topic type, must be either string or array.")}e[c.name]=++f;return this},unsubscribe:function(b){switch(k.type(b.name)){case "string":a(b.name);break;case "array":for(var d=b.name.length;d--;)a(b.name[d]);break;default:n("Name passed is not of valid type.")}return this}}}(),
s=function(){var a=k(g),b=a.height(),d=a.width(),h=a.scrollTop(),f=e.createElement("video"),c=function(){return f.requestFullScreen?{active:function(){return null!==e.fullscreenElement},element:function(){return e.fullscreenElement},enter:function(a){a.requestFullscreen()},exit:function(){e.exitFullscreen()}}:f.webkitRequestFullscreen?{active:function(){return null!==e.webkitFullscreenElement},element:function(){return e.webkitFullscreenElement},enter:function(a){a.webkitRequestFullscreen()},exit:function(){e.webkitExitFullscreen()}}:
f.mozRequestFullScreen?{active:function(){return null!==e.mozFullScreenElement},element:function(){return e.mozFullScreenElement},enter:function(a){a.mozRequestFullScreen()},exit:function(){e.mozCancelFullScreen()}}:f.msRequestFullscreen?{active:function(){return null!==e.msFullscreenElement},element:function(){return e.msFullscreenElement},enter:function(a){a.msRequestFullscreen()},exit:function(){e.msExitFullscreen()}}:{active:function(){return!1},element:function(){},enter:function(){n("Fullscreen API is not supported.")},
exit:function(){n("Fullscreen API is not supported.")}}}(),m=c.element(),p=c.active();a.off(".bolster.setWindowAttributes").on({"webkitfullscreenchange.bolster.setWindowAttributes mozfullscreenchange.bolster.setWindowAttributes fullscreenchange.bolster.setWindowAttributes MSFullscreenChange.bolster.setWindowAttributes":function(){m=c.element();p=c.active();l.publish({topic:"fullscreenChange",data:{active:p,element:m}})},"load.bolster.setWindowAttributes":function(a){l.publish({topic:"windowLoad",
data:{event:a,height:b,originalState:a.originalEvent.state,scrollTop:h,width:d}})},"resize.bolster.setWindowAttributes":function(){b=a.height();d=a.width();l.publish({topic:"windowResize",data:{height:b,width:d}})},"popstate.bolster.setWindowAttributes":function(a){l.publish({topic:"popstateChange",data:{event:a,originalState:a.originalEvent.state}})},"scroll.bolster.setWindowAttributes":function(){h=a.scrollTop();l.publish({topic:"windowScroll",data:{scrollTop:h}})}});return{dimensions:function(){return{width:d,
height:b}},enterFullscreen:function(a){return c.enter(a)},exitFullscreen:function(){return c.exit()},getFullscreenElement:function(){return m},height:function(){return b},isFullscreen:function(){return p},scrollTop:function(){return h},width:function(){return d},window:function(){return a}}}(),t=function(){var a=k(e),b=a.width(),d=a.height();a.off(".bolster.setDocumentAttributes").on({"load.bolster.setDocumentAttributes":function(){l.publish({topic:"documentLoad",data:{width:b,height:d}})},"resize.bolster.setDocumentAttributes":function(){b=
a.width();d=a.height();l.publish({topic:"documentResize",data:{width:b,height:d}})}});return{document:function(){return a},height:function(){return d},width:function(){return b}}}(),m={loadImg:function(a,b,d,e){if("function"===k.type(e)){var f=new Image;f.src=a.src;f.complete||4===f.readyState||"complete"===f.readyState?e.call(a,{height:a.height,naturalHeight:f.naturalHeight||f.height,naturalWidth:f.naturalWidth||f.width,percentComplete:Math.floor(100*(b+1)/d),src:a.src,width:a.width}):(f.onload=
function(){e.call(a,{height:a.height,naturalHeight:f.naturalHeight||f.height,naturalWidth:f.naturalWidth||f.width,percentComplete:Math.floor(100*(b+1)/d),src:a.src,width:a.width})},f.src=a.src)}},naturalDimensions:{height:function(a){var b=new Image;b.onload=function(){return b.naturalHeight||b.height};b.src=a.src},width:function(a){var b=new Image;b.onload=function(){return b.naturalWidth||b.width};b.src=a.src}},getPage:function(){return Array.prototype.lastIndexOf?function(a){return a.substring(a.lastIndexOf("/")+
1)}:function(a){a=a.split("/");return a[a.length-1].split("?")[0]}}()};k.extend({document:function(a){return a?t[a]():t.document()},page:function(a){return m.getPage(a||g.location.href)},pledge:function(a){if("function"===k.type(a))return(new Pledge).start(a);n("Must pass function into $.pledge.")},postpone:function(){return new Postpone},publish:function(a){return l.publish(a)},subscribe:function(a){return l.subscribe(a)},supports:function(a){return v[a]()},unsubscribe:function(a){return l.unsubscribe(a)},
window:function(a,b){return a?s[a](b):s.window()}});k.fn.extend({active:function(a){return this.hasClass(a||"active")},activate:function(a,b){a=a||"active";return b?this.deactivate(a,b).addClass(a):this.deactivate(a).addClass(a)},deactivate:function(a,b){a=a||"active";b?this.parents("."+b).find("."+a).removeClass(a):this.parent().find("."+a).removeClass(a);return this},imgLoad:function(a,b){var d=this.length;return b&&0<b?this.each(function(e){var f=this;g.setTimeout(function(){m.loadImg(f,e,d,a)},
b*e)}):this.each(function(b){m.loadImg(this,b,d,a)})},naturalHeight:function(){return m.naturalDimensions.height(this.get(0))},naturalWidth:function(){return m.naturalDimensions.width(this.get(0))},unselectable:function(a){(a?this:this.add(this.find("*"))).attr({unselectable:"on"}).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});return this},unstyle:function(a){switch(k.type(a)){case "string":return this.css(a,
"");case "array":for(var b={},d=a.length;d--;)b[a[d]]="";return this.css(b);case "undefined":return this.removeAttr("style");default:return throwwError("Parameter passed in is not of appropriate type; processing aborted."),this}}})})(window,document,jQuery);
