/*
 *
 * Copyright 2014 Tony Quetano under the terms of the MIT
 * license found at https://github.com/planttheidea/bolster/MIT_License.txt
 *
 * Bolster.js - An augmentation library for jQuery
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
*/
(function(g,b,l){var p=function(a){throw Error(a);},s=function(){var a={audio:b.createElement("audio"),canvas:b.createElement("canvas"),document:b.documentElement||b.body,div:b.createElement("div"),input:b.createElement("input"),p:b.createElement("p"),style:b.createElement("style"),video:b.createElement("video")},k=function(d){try{for(var m=!1,c=d.length;c--;)if(d[c]in a.document.style){m=!0;break}return m}catch(b){return!1}},f=function(d,m){try{var c=a.div.style[d];a.div.style[d]=m;return c!==a.div.style[d]?
(a.div.style[d]="",!0):!1}catch(b){return!1}},h=function(d){return d in a.input},e=function(d){try{var m=a.input.type;a.input.type=d;return m!==a.input.type?(a.input.type="text",!0):!1}catch(c){return!1}},c=function(d){try{var m=b.head||b.getElementsByTagName("head")[0],c=a.style.sheet||a.style.styleSheet;a.style.type="text/css";m.appendChild(a.style);return c&&d?(t?function(a){c.cssText=a+" { }";return 0!==c.cssText.length&&!/unknown/i.test(c.cssText)&&0===c.cssText.indexOf(a)}:function(a){try{c.insertRule(a+
"{ }",0),c.deleteRule(c.cssRules.length-1)}catch(d){return!1}return!0})(d):!1}catch(k){return!1}};c("test");var u=!!g.applicationCache,r=a.div.attachEvent,n=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mpeg;").replace(/no/,"")),m=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/mp4;").replace(/no/,"")),d=!(!a.audio.canPlayType||!a.audio.canPlayType("audio/ogg;").replace(/no/,"")),v=k("boxShadow MozBoxShadow WebkitBoxShadow MsBoxShadow KhtmlBoxShadow OBoxShadow".split(" ")),w=!(!a.canvas.getContext||
!a.canvas.getContext("2d")),p=!!b.documentElement.classList,q;q=a.div.style.animationName?!0:k(["WebkitAnimationName","MozAnimationName","OAnimationName","msAnimationName","KhtmlAnimationName"]);var y=f("width","calc(100% - 10px)"),s=k(["columnCount","webkitColumnCount","MozColumnCount"]),L=k(["boxReflect","WebkitBoxRefect"]),t=!!a.style.styleSheet,M=!!g.CustomEvent,x=!!("draggable"in a.div),N=a.div.addEventListener,B=f("display","flex"),C=!!("geolocation"in navigator),O=!!b.getElementsByClassName,
P=function(d,c){try{return c=c||a.div,support=!1,d="on"+d,support=d in c,support||(c.setAttribute(d,"return;"),support="function"===l.type(c[d]),c.removeAttribute(d)),support}catch(m){return!1}}("hashchange",g),Q=!(!g.history||!g.history.pushState),R=f("background-color","hsla(0,0%,0%,0)"),S=function(){try{var a=["webkit","ms","moz"],d=!1;if(g.indexedDB&&g.IDBTransaction&&g.IDBKeyRange)d=!0;else for(var c=a.length;c--;)if(g[a[c]+"IndexedDB"]&&g[a[c]+"IDBTransaction"]&&g[a[c]+"IDBKeyRange"]){d=!0;
break}return d}catch(m){return!1}}(),T=h("autocomplete"),U=h("autofocus"),V=e("color"),W=e("date"),X=e("datetime"),Y=e("datetime-local"),Z=e("email"),$=h("list"),aa=h("max"),ba=h("min"),ca=h("multiple"),da=e("month"),ea=e("number"),fa=h("pattern"),ga=h("placeholder"),ha=e("range"),ia=h("required"),ja=e("search"),ka=h("step"),la=e("tel"),ma=e("time"),na=e("url"),oa=e("week"),pa=!(!JSON||"function"!==l.type(JSON.parse)),z;try{g.localStorage.setItem("test","test"),g.localStorage.removeItem("test"),z=
!0}catch(Ma){z=!1}var F=function(){try{for(var a=["linear-gradient","-webkit-linear-gradient","-moz-linear-gradient","-o-linear-gradient"],d=!1,c=a.length;c--;)if(f("background",a[c]+"(-45deg,rgba(0,0,0,0) 0%,rgba(0,0,0,1) 100%)")){d=!0;break}return d?d:f("background","-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,1)))")}catch(m){return!1}}(),qa=function(){try{var d=b.createElement("style"),c=!1;a.div.id="MediaTest";b.body.appendChild(a.div);d.textContent="@media screen and (min-width:1px) { #MediaTest { position:absolute; }}";
b.body.appendChild(d);g.getComputedStyle&&"absolute"==g.getComputedStyle(a.div).position&&(c=!0);a.div.style="";b.body.removeChild(a.div);b.body.removeChild(d);return c}catch(m){return!1}}(),ra="undefined"!==l.type(g.pageXOffset)&&"undefined"!==l.type(g.pageYOffset),sa=!!g.postMessage,ta=c(":active"),ua=c(":after"),va=c("::after"),wa=c(":before"),xa=c("::before"),ya=c(":focus"),za=c(":hover"),Aa=c("::first-letter"),Ba=c("::first-line"),Ca=c(":link"),Da=c(":visited"),G=function(){try{for(var a=["radial-gradient",
"-webkit-radial-gradient","-moz-radial-gradient","-o-radial-gradient"],d=!1,c=a.length;c--;)if(f("background",a[c]+"(rgb(0,0,0) 0%,rgb(255,255,255) 100%)")){d=!0;break}return d?d:f("background","-webkit-gradient(radial, center center, 0px, center center, 100%, from(rgb(0,0,0)), to(rgb(255,255,255)))")}catch(m){return!1}}(),Ea=f("background-color","rgba(0,0,0,0)"),A;try{g.sessionStorage.setItem("test","test"),g.sessionStorage.removeItem("test"),A=!0}catch(Na){A=!1}var Fa=!!(-1<b.createElementNS("http://www.w3.org/2000/svg",
"animateMotion").toString().indexOf("SVG")),Ga=!(!b.createElementNS||!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Ha=k(["textShadow"]),Ia=!!("ontouchstart"in b.documentElement||g.navigator.msMaxTouchPoints),E=k(["transform","WebkitTransform","MozTransform","msTransform","OTransform"]),H=function(){if(E)try{for(var a=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],d=!1,c=a.length;c--;)if(f(a[c],"translate3d(1px,1px,1px)")){d=!0;break}return d}catch(m){return!1}else return!1}(),
Ja=k(["transition","WebkitTransition","MozTransition","OTransition"]),I=!(!a.video.canPlayType||!a.video.canPlayType("video/mp4;").replace(/no/,"")),J=!(!a.video.canPlayType||!a.video.canPlayType("video/ogg;").replace(/no/,"")),K=!(!a.video.canPlayType||!a.video.canPlayType("video/webm;").replace(/no/,"")),Ka=function(){try{var d=!1;try{a.canvas.getContext("webgl"),d=!0}catch(c){try{a.getContext("experimental-webgl"),d=!0}catch(m){d=!1}}return d}catch(b){return!1}}(),La=!(!g.WebSocket||!g.WebSocket.prototype.send);
(function(){var d=b.head||b.getElementsByTagName("head")[0];d.contains(a.style)&&d.removeChild(a.style)})();return{applicationCache:function(){return u},attachEvent:function(){return r},audio:function(){return{mp3:n,mp4:m,ogg:d}},audioMP3:function(){return n},audioMP4:function(){return m},audioOGG:function(){return d},boxShadow:function(){return v},canvas:function(){return w},classList:function(){return p},cssAnimation:function(){return q},cssCalc:function(){return y},cssColumn:function(){return s},
cssReflection:function(){return L},customEvent:function(){return M},dragAndDrop:function(){return x},eventListener:function(){return N},flexbox:function(){return B},geolocation:function(){return C},getElementsByClassName:function(){return O},gradient:function(){return{linear:F,radial:G}},hashchange:function(){return P},history:function(){return Q},hsla:function(){return R},html5Attribute:function(){return{autocomplete:T,autofocus:U,list:$,max:aa,min:ba,multiple:ca,pattern:fa,placeholder:ga,required:ia,
step:ka}},html5Input:function(){return{color:V,date:W,dateTime:X,dateTimeLocal:Y,email:Z,month:da,number:ea,range:ha,search:ja,tel:la,time:ma,url:na,week:oa}},indexedDB:function(){return S},json:function(){return pa},linearGradient:function(){return F},localStorage:function(){return z},mediaQueries:function(){return qa},pageOffset:function(){return ra},postMessage:function(){return sa},pseudoClass:function(){return{active:ta,after:ua,before:wa,focus:ya,hover:za,link:Ca,visited:Da}},pseudoElement:function(){return{after:va,
before:xa,firstLetter:Aa,firstLine:Ba}},radialGradient:function(){return G},rgba:function(){return Ea},sessionStorage:function(){return A},smil:function(){return Fa},storage:function(){return{local:z,session:A}},svg:function(){return Ga},textShadow:function(){return Ha},touchEvents:function(){return Ia},transform:function(){return{twoD:E,threeD:H}},transform2d:function(){return E},transform3d:function(){return H},transition:function(){return Ja},video:function(){return{mp4:I,ogg:J,webM:K}},videoMP4:function(){return I},
videoOGG:function(){return J},videoWebM:function(){return K},webGL:function(){return Ka},webSocket:function(){return La}}}(),q=function(){function a(a){if(0<h[a])for(var b in f)if(f[b])for(var e=f[b].length;e--;)f[b][e].token===h[a]&&(delete h[a],f[b].splice(e,1))}function b(c,e,k,h,m){"array"!==l.type(f[c])&&(f[c]=[]);h&&(k=function(){k.call();a(m)});f[c].push({token:e,func:k})}var f={},h={},e=-1;return{getID:function(a){return h[a.name]},publish:function(a){var b=a.data||{},e,k;if(!f[a.topic])return!1;
for(k=(e=f[a.topic])?e.length:0;k--;)e[k].func(b,a.topic);return this},subscribe:function(c){if("string"!==l.type(c.name))return p("Name passed is not a string."),!1;h[c.name]&&a(c.name);switch(l.type(c.topic)){case "string":b(c.topic,c.token,c.fn,c.once,c.name);break;case "array":for(var f=c.topic.length;f--;)b(c.topic[f],c.token,c.fn,c.once,c.name);break;case "undefined":p("Must provide a topic to subscribe to.");break;default:p("Invalid topic type, must be either string or array.")}h[c.name]=++e;
return this},unsubscribe:function(c){switch(l.type(c.name)){case "string":a(c.name);break;case "array":for(var b=c.name.length;b--;)a(c.name[b]);break;default:p("Name passed is not of valid type.")}return this}}}(),B=function(){function a(a){return{fullscreenActive:m,fullscreenElement:n,hash:D,height:h,hostname:s,href:v,page:w,querystring:t,scrollTop:c,width:e}}function k(){D=g.location.hash.replace("#","")}var f=l(g),h=f.height(),e=f.width(),c=f.scrollTop(),u=b.createElement("video"),r=function(){return u.requestFullScreen?
{active:function(){return null!==b.fullscreenElement},element:function(){return b.fullscreenElement},enter:function(a){a.requestFullscreen()},exit:function(){b.exitFullscreen()}}:u.webkitRequestFullscreen?{active:function(){return null!==b.webkitFullscreenElement},element:function(){return b.webkitFullscreenElement},enter:function(a){a.webkitRequestFullscreen()},exit:function(){b.webkitExitFullscreen()}}:u.mozRequestFullScreen?{active:function(){return null!==b.mozFullScreenElement},element:function(){return b.mozFullScreenElement},
enter:function(a){a.mozRequestFullScreen()},exit:function(){b.mozCancelFullScreen()}}:u.msRequestFullscreen?{active:function(){return null!==b.msFullscreenElement},element:function(){return b.msFullscreenElement},enter:function(a){a.msRequestFullscreen()},exit:function(){b.msExitFullscreen()}}:{active:function(){return!1},element:function(){},enter:function(){p("Fullscreen API is not supported.")},exit:function(){p("Fullscreen API is not supported.")}}}(),n=r.element(),m=r.active(),d=function(){return Array.prototype.lastIndexOf?
function(a){return a.substring(a.lastIndexOf("/")+1).split("#")[0].split("?")[0]}:function(a){a=a.split("/");return a[a.length-1].split("#")[0].split("?")[0]}}(),v=g.location.href,w=d(v),D=g.location.hash.replace("#",""),s=g.location.hostname||g.location.host,y=function(){for(var a=g.location.search.substr(1).split("&"),d={},c=0,m=a.length;c<m;c++){var b=a[c].split("=");0<b[0].length&&(d[b[0]]=b[1])}return d},t=y();f.off(".bolster.setWindowAttributes").on({"webkitfullscreenchange.bolster.setWindowAttributes mozfullscreenchange.bolster.setWindowAttributes fullscreenchange.bolster.setWindowAttributes MSFullscreenChange.bolster.setWindowAttributes":function(){n=
r.element();m=r.active();q.publish({topic:"fullscreenChange",data:{fullscreenActive:m,fullscreenElement:n}})},"load.bolster.setWindowAttributes":function(d){q.publish({topic:"windowLoad",data:a(d)})},"hashchange.bolster.setWindowAttributes":k,"resize.bolster.setWindowAttributes":function(){h=f.height();e=f.width();q.publish({topic:"windowResize",data:{height:h,width:e}})},"popstate.bolster.setWindowAttributes":function(a){q.publish({topic:"popstateChange",data:{event:a,originalState:a.originalEvent.state}});
k();v=g.location.href;y();w=d(g.location.href)},"scroll.bolster.setWindowAttributes":function(){c=f.scrollTop();q.publish({topic:"windowScroll",data:{scrollTop:c}})}});return{attributes:a,dimensions:function(){return{width:e,height:h}},enterFullscreen:function(a){return r.enter(a)},exitFullscreen:function(){return r.exit()},fullscreenElement:function(){return n},hash:function(){return D},height:function(){return h},hostname:function(){return s},href:function(){return v},isFullscreen:function(){return m},
page:function(){return w},querystring:function(){return t},scrollTop:function(){return c},width:function(){return e},window:function(){return f}}}(),C=function(){function a(){return{anchors:b.anchors,characterSet:e,forms:b.forms,height:h,images:b.images,links:b.links,referrer:n,styleSheets:g,styleSheetSets:p,title:b.title,uri:c,width:f}}var k=l(b),f=k.width(),h=k.height(),e=b.characterSet||b.charset,c=b.documentURI,g=b.styleSheets,p=b.styleSheetSets,n=b.referrer;k.off(".bolster.setDocumentAttributes").on({"load.bolster.setDocumentAttributes":function(){q.publish({topic:"documentLoad",
data:a()})},"resize.bolster.setDocumentAttributes":function(){f=k.width();h=k.height();q.publish({topic:"documentResize",data:{height:h,width:f}})}});return{anchors:function(){return b.anchors},attributes:a,characterSet:function(){return e},document:function(){return k},forms:function(){return b.forms},height:function(){return h},images:function(){return b.images},links:function(){return b.links},referrer:function(){return n},styleSheets:function(){return g},styleSheetSets:function(){return p},title:function(){return b.title},
uri:function(){return c},width:function(){return f}}}(),x=function(){function a(a,d){if("local"===a)switch(l.type(d)){case "array":for(var c={},b=0,k=d.length;b<k;b++)c[d[b]]=e[d[b]];return c;case "string":return e[d];case "undefined":return e;default:p("Parameter passed is invalid.")}else if("session"===a)switch(l.type(d)){case "array":c={};b=0;for(k=d.length;b<k;b++)c[d[b]]=h[d[b]];return c;case "string":return h[d];case "undefined":return h;default:p("Parameter passed is invalid.")}}var k=s.sessionStorage(),
f=s.localStorage();s.json();var h=function(){for(var a={},d=0,c=g.sessionStorage.length;d<c;d++){var b=g.localStorage.key(d);a[b]=g.sessionStorage[b]}return a}(),e=function(){for(var a={},d=0,c=g.localStorage.length;d<c;d++){var b=g.localStorage.key(d);a[b]=g.localStorage[b]}return a}(),c=function(){return k&&f?function(a,d){if("object"===l.type(d))for(var c in d)d.hasOwnProperty(c)&&(a?(e[c]=d[c],g.localStorage[c]="string"===l.type(d[c])?d[c]:JSON.stringify(d[c])):(h[c]=d[c],g.sessionStorage[c]=
"string"===l.type(d[c])?d[c]:JSON.stringify(d[c])));else p("Parameter passed must be an object.")}:function(a,d){if("object"===l.type(d))for(var c in d){if(d.hasOwnProperty(c)){var k,f=a;k=d[c].replace("; ",";").split(";").sort();var g=k.length,f=encodeURIComponent(k[0])+(f?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"");if(1<g)for(;g--;){var n=k[g].split("=");switch(n[0]){case "path":case "domain":f+="; "+n[0]+"="+n[1];break;case "secure":f+="; secure"}}k=f;a?e[c]=k.split("; ")[0]:h[c]=k.split("; ")[0];
b.cookie=encodeURIComponent(c)+"="+JSON.stringify(k)}}else p("Parameter passed must be an object.")}}(),q=function(a,d){a&&e.hasOwnProperty(d)?(g.localStorage.removeItem(d),delete e[d]):h.hasOwnProperty(d)&&(g.sessionStorage.removeItem(d),delete h[d])},r=function(a,d){a&&e.hasOwnProperty(d)?(b.cookie=encodeURIComponent(d)+e[d].split("; ").push("; expires=Thu, 01 Jan 1970 00:00:00 GMT").sort().join("; "),delete e[d]):h.hasOwnProperty(d)&&(b.cookie=encodeURIComponent(d)+h[d].split("; ").push("; expires=Thu, 01 Jan 1970 00:00:00 GMT").sort().join("; "),
delete h[d])},n=function(){return k&&f?function(a,d){switch(l.type(d)){case "array":for(var c=d.length;c--;)q(a,d[c]);break;case "string":q(a,d);break;case "object":q("local"===d.type,d.keys);break;default:p("Parameter passed is invalid.")}}:function(a,c){switch(l.type(c)){case "array":for(var b=c.len;b--;)r(a,c[b]);break;case "string":r(a,c);break;case "object":r("local"===c.type,c.keys);break;default:p("Parameter passed is invalid.")}}}();return{local:function(b){switch(b.length){case 0:return a("local");
case 1:if("object"===l.type(b[0]))c(!0,b[0]);else return a("local",b[0]);break;case 2:c(!0,b[0],b[1]);break;default:p("Parameter passed is not a valid type.")}},remove:function(a){switch(a.length){case 0:g.localStorage.clear();g.sessionStorage.clear();e=h={};break;case 1:switch(l.type(a[0])){case "string":case "array":n(!0,a[0]);n(!1,a[0]);break;case "object":if("undefined"===l.type(a[0].type))n(!0,a[0].keys),n(!1,a[0].keys);else switch(a[0].type){case "local":n(!0,a[0].keys);break;case "session":n(!1,
a[0].keys);break;default:p("Invalid value for storage type.")}}break;case 2:switch(a[1]){case "local":n(!0,a[0]);break;case "session":n(!1,a[0]);break;default:n(!0,a[0]),n(!1,a[0])}}},session:function(b){switch(b.length){case 0:return a("session");case 1:if("object"===l.type(b[0]))c(!1,b[0]);else return a("session",b[0]);break;case 2:c(!1,b[0],b[1]);break;default:p("Parameter passed is not a valid type.")}}}}(),t={loadImg:function(a,b,f,g){if("function"===l.type(g)){var e=new Image;e.src=a.src;e.complete||
4===e.readyState||"complete"===e.readyState?g.call(a,{height:a.height,naturalHeight:e.naturalHeight||e.height,naturalWidth:e.naturalWidth||e.width,percentComplete:Math.floor(100*(b+1)/f),src:a.src,width:a.width}):(e.onload=function(){g.call(a,{height:a.height,naturalHeight:e.naturalHeight||e.height,naturalWidth:e.naturalWidth||e.width,percentComplete:Math.floor(100*(b+1)/f),src:a.src,width:a.width})},e.src=a.src)}},naturalDimensions:{height:function(a){var b=new Image;b.onload=function(){return b.naturalHeight||
b.height};b.src=a.src},width:function(a){var b=new Image;b.onload=function(){return b.naturalWidth||b.width};b.src=a.src}}};l.extend({document:function(a,b){return a?C[a](b):C.document()},localStorage:function(){return x.local(arguments)},pledge:function(a){if("function"===l.type(a))return(new Pledge).start(a);p("Must pass function into $.pledge.")},postpone:function(){return new Postpone},publish:function(a){return q.publish(a)},removeStorage:function(){return x.remove(arguments)},sessionStorage:function(){return x.session(arguments)},
subscribe:function(a){return q.subscribe(a)},supports:function(a){return s[a]()},unsubscribe:function(a){return q.unsubscribe(a)},window:function(a,b){return a?B[a](b):B.window()}});l.fn.extend({active:function(a){return this.hasClass(a||"active")},activate:function(a,b){a=a||"active";return b?this.deactivate(a,b).addClass(a):this.deactivate(a).addClass(a)},deactivate:function(a,b){a=a||"active";b?this.parents("."+b).find("."+a).removeClass(a):this.parent().find("."+a).removeClass(a);return this},
imgLoad:function(a,b){var f=this.length;return b&&0<b?this.each(function(h){var e=this;g.setTimeout(function(){t.loadImg(e,h,f,a)},b*h)}):this.each(function(b){t.loadImg(this,b,f,a)})},naturalHeight:function(){return t.naturalDimensions.height(this.get(0))},naturalWidth:function(){return t.naturalDimensions.width(this.get(0))},unselectable:function(a){(a?this:this.add(this.find("*"))).attr({unselectable:"on"}).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none",
"-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});return this},unstyle:function(a){switch(l.type(a)){case "string":return this.css(a,"");case "array":for(var b={},f=a.length;f--;)b[a[f]]="";return this.css(b);case "undefined":return this.removeAttr("style");default:return p("Parameter passed in is not of appropriate type; processing aborted."),this}}})})(window,document,jQuery);
